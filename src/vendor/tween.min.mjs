/**
* Class for creating a tweening animation
* @class Tween  
* @license Tween does not have a license at this time. For licensing contact the author
* @author https://github.com/doubleactii
* Copyright (c) 2023 Evitca Studio
*/
class Tween{constructor({start:t={},end:e={},duration:s=1e3,easing:a=Tween.linear}={}){this._build(t,e,s,a)}static linear(t,e,s,a){return s*t/a+e}static easeInQuad(t,e,s,a){return s*(t/=a)*t+e}static easeOutQuad(t,e,s,a){return-s*(t/=a)*(t-2)+e}static easeInOutQuad(t,e,s,a){return(t/=a/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}static easeInSine(t,e,s,a){return-s*Math.cos(t/a*(Math.PI/2))+s+e}static easeOutSine(t,e,s,a){return s*Math.sin(t/a*(Math.PI/2))+e}static easeInOutSine(t,e,s,a){return-s/2*(Math.cos(Math.PI*t/a)-1)+e}static easeInExpo(t,e,s,a){return 0==t?e:s*Math.pow(2,10*(t/a-1))+e}static easeOutExpo(t,e,s,a){return t==a?e+s:s*(1-Math.pow(2,-10*t/a))+e}static easeInOutExpo(t,e,s,a){return 0==t?e:t==a?e+s:(t/=a/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(2-Math.pow(2,-10*--t))+e}static easeInCirc(t,e,s,a){return-s*(Math.sqrt(1-(t/=a)*t)-1)+e}static easeOutCirc(t,e,s,a){return s*Math.sqrt(1-(t=t/a-1)*t)+e}static easeInOutCirc(t,e,s,a){return(t/=a/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e}static easeInCubic(t,e,s,a){return s*(t/=a)*t*t+e}static easeOutCubic(t,e,s,a){return s*((t=t/a-1)*t*t+1)+e}static easeInOutCubic(t,e,s,a){return(t/=a/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e}static easeInQuart(t,e,s,a){return s*(t/=a)*t*t*t+e}static easeOutQuart(t,e,s,a){return-s*((t=t/a-1)*t*t*t-1)+e}static easeInOutQuart(t,e,s,a){return(t/=a/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e}static easeInQuint(t,e,s,a){return s*(t/=a)*t*t*t*t+e}static easeOutQuint(t,e,s,a){return s*((t=t/a-1)*t*t*t*t+1)+e}static easeInOutQuint(t,e,s,a){return(t/=a/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e}static easeInElastic(t,e,s,a){var i=1.70158,n=0,r=s;return 0==t?e:1==(t/=a)?e+s:(n=n||.3*a,i=r<Math.abs(s)?(r=s,n/4):0===s&&0===r?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(s/r),-(r*Math.pow(2,10*--t)*Math.sin((t*a-i)*(2*Math.PI)/n))+e)}static easeOutElastic(t,e,s,a){var i=1.70158,n=0,r=s;return 0==t?e:1==(t/=a)?e+s:(n=n||.3*a,i=r<Math.abs(s)?(r=s,n/4):0===s&&0===r?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(s/r),r*Math.pow(2,-10*t)*Math.sin((t*a-i)*(2*Math.PI)/n)+s+e)}static easeInOutElastic(t,e,s,a){var i=1.70158,n=0,r=s;return 0==t?e:2==(t/=a/2)?e+s:(n=n||a*(.3*1.5),i=r<Math.abs(s)?(r=s,n/4):0===s&&0===r?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(s/r),t<1?r*Math.pow(2,10*--t)*Math.sin((t*a-i)*(2*Math.PI)/n)*-.5+e:r*Math.pow(2,-10*--t)*Math.sin((t*a-i)*(2*Math.PI)/n)*.5+s+e)}static easeInBack(t,e,s,a){return s*(t/=a)*t*(2.70158*t-1.70158)+e}static easeOutBack(t,e,s,a){return s*((t=t/a-1)*t*(2.70158*t+1.70158)+1)+e}static easeInOutBack(t,e,s,a){var i=1.70158;return(t/=a/2)<1?s/2*(t*t*((1+(i*=1.525))*t-i))+e:s/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e}static easeInBounce(t,e,s,a){return s-this.easeOutBounce(a-t,0,s,a)+e}static easeOutBounce(t,e,s,a){return(t/=a)<1/2.75?7.5625*s*t*t+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e}static easeInOutBounce(t,e,s,a){return t<.5*a?.5*this.easeInBounce(2*t,0,s,a)+e:.5*this.easeOutBounce(2*t-a,0,s,a)+.5*s+e}static _clamp(t,e=0,s=1){return Math.max(e,Math.min(t,s))}static _hexToRgb(t){return t=(t=3===(t=t.replace("#","")).length?t.replace(new RegExp("(.)","g"),"$1$1"):t).match(new RegExp("..","g")),[Tween._clamp(parseInt(t[0],16),0,255),Tween._clamp(parseInt(t[1],16),0,255),Tween._clamp(parseInt(t[2],16),0,255)]}static _rgbToHex(t){if(Array.isArray(t))return"#"+t.map(t=>Math.abs(Math.round(t)).toString(16).padStart(2,"0")).join("")}_build(t,e,s,a){this.start=t,this.end=e,this.duration=s,this.easing="function"==typeof a?a:Tween.linear,this.events={},this.exportedValues={},this.tweening=!1,this.update=null,this.paused=!1,this.lastTime=0,this.elapsed=0}build({start:t={},end:e={},duration:s=1e3,easing:a=Tween.linear}={}){return this._build(t,e,s,a),this}on(t,e){if("function"==typeof e)switch(t){case"start":case"end":case"pause":case"resume":this.events[t]=e;break;default:console.error(`The event "${t}" is not supported.`)}else console.error(`The callback for event "${t}" is not a function.`);return this}animationFrame=()=>{if(this.tweening&&!this.paused){var a,i,t=Date.now();this.lastTime||(this.lastTime=t),this.elapsed+=t-this.lastTime;let s=this.elapsed/this.duration;for(a in 1<(s=this.oscillating?(1-Math.cos(s*Math.PI))/2:s)&&(s=1),this.end){let t=this.start[a],e=this.end[a];"string"==typeof t&&(3===t.length||6===t.length)||4===t.length||7===t.length?(t=Tween._hexToRgb(t),e=Tween._hexToRgb(e),i=[this.easing(s,t[0],e[0]-t[0],1),this.easing(s,t[1],e[1]-t[1],1),this.easing(s,t[2],e[2]-t[2],1)],this.exportedValues[a]=Tween._rgbToHex(i)):this.exportedValues[a]=this.easing(s,t,e-t,1)}this.update(this.exportedValues),1!==s||this.oscillating?requestAnimationFrame(this.animationFrame):(this.stop(),this.events.end&&this.events.end()),this.lastTime=t}};animate(t,s=!1){if("function"!=typeof t)console.error("The pUpdate parameter passed to animate is not a function.");else if(!this.tweening){var a=Object.keys(this.start);let e=Object.keys(this.end);if(a.length&&e.length){if(a.every(t=>e.includes(t)))return this.update=t,this.tweening=!0,this.elapsed=0,this.oscillating=s,this.events.start&&this.events.start(),requestAnimationFrame(this.animationFrame),this;console.error("The end object is missing properties that the start object has.")}else console.error("The start object or the end object has no properties.")}}resume(){return this.paused&&(this.lastTime=Date.now(),this.paused=!1,this.events.resume&&this.events.resume(),requestAnimationFrame(this.animationFrame)),this}pause(){return this.paused||(this.paused=!0,this.events.pause&&this.events.pause()),this}stop(){this.tweening=!1,this.oscillating=!1,this.update=null,this.elapsed=0,this.lastTime=0,this.paused=!1;for(const t in this.exportedValues)this.exportedValues.hasOwnProperty(t)&&delete this.exportedValues[t]}}export{Tween};